#!/bin/bash

############################################################
# REBUILD DIST FOLDER                                            
############################################################

if [[ -d "dist" ]]; then
	rm -r "dist"
fi

if [[ ! -d "dist" ]]; then
	mkdir dist
fi

############################################################
# ADD ALL BASH SCRIPTS IN ONE FILE                                           
############################################################

echo "#!/bin/bash" >> dist/umac.sh
echo "" >> dist/umac.sh
./src/main.sh build >> dist/umac.sh


############################################################
# CHANGE PERMS                                          
############################################################

chmod a+x dist/umac.sh


############################################################
# COMPILATE TO BINARY                                         
############################################################

shc -f dist/umac.sh -o dist/umac


############################################################
# CHANGE PERMS AGAIN                                         
############################################################

chmod a+x dist/*

############################################################
# ZIP BINARY                                        
############################################################

cd dist
zip umac.zip umac
cd ..


############################################################
# CHANGE PERMS AGAIN                                         
############################################################

chmod a+x dist/*

############################################################